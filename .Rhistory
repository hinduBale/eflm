r <- seq(1, nrow(trade_demo_glm), lenght.out = 100)
library(eflm)
model <- "trade ~ log_dist + cntg + lang + clny + exp_year + imp_year"
r <- seq(1, nrow(trade_demo_glm), lenght.out = 100)
r <- seq(1, nrow(trade_demo_glm), length.out = 100)
r
r <- round(seq(1, nrow(trade_demo_glm), length.out = 100), 0)
r
r <- round(seq(1, nrow(trade_demo_glm), length.out = 25), 0)
trade_demo_glm %>% select(year) %>% distinct()
library(dplyr)
library(dplyr)
trade_demo_glm %>% select(year) %>% distinct()
trade_demo_glm %>% ungroup() %>% select(year) %>% distinct()
y <- unique(trade_demo_glm$year)
y
subset(trade_demo_glm, year <= 2002)
dim(trade_demo_glm)
library(eflm)
model <- "trade ~ log_dist + cntg + lang + clny + exp_year + imp_year"
benchmarks <- list()
y <- unique(trade_demo_glm$year)
for (i in seq_along(y)) {
d <- subset(trade_demo_glm, year <= y[i])
out <- bench::mark(
glm(model, data = d)$coefficients,
eglm(model, data = d, bypass = F)$coefficients
)
out$dimensions <- nrow(d) * ncol(d)
benchmarks[[i]] <- out
}
trade_demo_benchmark = benchmarks
use_data(trade_demo_benchmark, compress = "xz")
library(ggplot2)
benchmarks2 <- do.call("rbind", benchmarks)
ggplot(benchmarks2, aes(x = dimensions, y = median, color = as.character(expression))) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
coord_fixed() +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time", x = NULL, y = NULL)
ggplot(benchmarks2, aes(x = dimensions, y = median, color = as.character(expression))) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
# scale_x_log10(
#   breaks = scales::trans_breaks("log10", function(x) 10^x),
#   labels = scales::trans_format("log10", scales::math_format(10^.x))
# ) +
coord_fixed() +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time", x = NULL, y = NULL)
ggplot(benchmarks2, aes(x = dimensions, y = median, color = as.character(expression))) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
# scale_x_log10(
#   breaks = scales::trans_breaks("log10", function(x) 10^x),
#   labels = scales::trans_format("log10", scales::math_format(10^.x))
# ) +
coord_fixed() +
theme(panel.grid.minor = element_blank(), legend.position = "bottom") +
labs(title = "log-log plot of number of observations vs fitting time", x = NULL, y = NULL)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark2)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = as.character(expression))) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
# scale_x_log10(
#   breaks = scales::trans_breaks("log10", function(x) 10^x),
#   labels = scales::trans_format("log10", scales::math_format(10^.x))
# ) +
coord_fixed() +
theme(panel.grid.minor = element_blank(), legend.position = "bottom") +
labs(title = "log-log plot of number of observations vs fitting time", x = NULL, y = NULL)
View(trade_demo_benchmark2)
y <- unique(trade_demo_glm$year)
trade_demo_benchmark <- list()
model <- "trade ~ log_dist + cntg + lang + clny + exp_year + imp_year"
model <- "trade ~ log_dist + cntg + lang + clny + exp_year + imp_year"
y <- unique(trade_demo_glm$year)
trade_demo_benchmark <- list()
library(eflm)
model <- "trade ~ log_dist + cntg + lang + clny + exp_year + imp_year"
y <- unique(trade_demo_glm$year)
trade_demo_benchmark <- list()
seq_along(y)
i=1
y[i]
y[2]
y[3]
d <- subset(trade_demo_glm, year <= y[i])
trade_demo_glm
d <- trade_demo_glm[trade_demo_glm$year <= y[i], ]
library(eflm)
model <- "trade ~ log_dist + cntg + lang + clny + exp_year + imp_year"
y <- unique(trade_demo_glm$year)
trade_demo_benchmark <- list()
for (i in seq_along(y)) {
d <- trade_demo_glm[trade_demo_glm$year <= y[i], ]
out <- bench::mark(
glm(model, data = d)$coefficients,
eglm(model, data = d, bypass = F)$coefficients
)
out$dimensions <- nrow(d) * ncol(d)
trade_demo_benchmark[[i]] <- out
}
use_data(trade_demo_benchmark, compress = "xz")
library(ggplot2)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = as.character(expression))) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
# scale_x_log10(
#   breaks = scales::trans_breaks("log10", function(x) 10^x),
#   labels = scales::trans_format("log10", scales::math_format(10^.x))
# ) +
coord_fixed() +
theme(panel.grid.minor = element_blank(), legend.position = "bottom") +
labs(title = "log-log plot of number of observations vs fitting time", x = NULL, y = NULL)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
library(ggplot2)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = as.character(expression))) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
# scale_x_log10(
#   breaks = scales::trans_breaks("log10", function(x) 10^x),
#   labels = scales::trans_format("log10", scales::math_format(10^.x))
# ) +
coord_fixed() +
theme(panel.grid.minor = element_blank(), legend.position = "bottom") +
labs(title = "log-log plot of number of observations vs fitting time", x = NULL, y = NULL)
library(ggplot2)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = as.character(expression))) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
coord_fixed() +
theme(panel.grid.minor = element_blank(), legend.position = "bottom") +
labs(title = "log-log plot of number of observations vs fitting time", x = NULL, y = NULL)
library(ggplot2)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = as.character(expression))) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
coord_fixed() +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time", x = NULL, y = NULL)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
trade_demo_benchmark2$expression <- ifelse(
grep("eglm", as.character(trade_demo_benchmark2$expression)), "eglm", "glm"
)
trade_demo_benchmark2$expression <- ifelse(
grepl("eglm", as.character(trade_demo_benchmark2$expression)), "eglm", "glm"
)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
trade_demo_benchmark2$expression <- ifelse(
grepl("eglm", as.character(trade_demo_benchmark2$expression)), "eglm", "glm"
)
library(ggplot2)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
trade_demo_benchmark2$expression <- ifelse(
grepl("eglm", as.character(trade_demo_benchmark2$expression)), "eglm", "glm"
)
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = as.character(expression))) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
coord_fixed() +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time", x = NULL, y = NULL)
library(ggplot2)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
trade_demo_benchmark2$expression <- ifelse(
grepl("eglm", as.character(trade_demo_benchmark2$expression)), "eglm", "glm"
)
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
coord_fixed() +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time", x = NULL, y = NULL)
library(ggplot2)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
trade_demo_benchmark2$expression <- ifelse(
grepl("eglm", as.character(trade_demo_benchmark2$expression)), "eglm", "glm"
)
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
# scale_x_log10(
#   breaks = scales::trans_breaks("log10", function(x) 10^x),
#   labels = scales::trans_format("log10", scales::math_format(10^.x))
# ) +
coord_fixed() +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time", x = NULL, y = NULL)
library(ggplot2)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
trade_demo_benchmark2$expression <- ifelse(
grepl("eglm", as.character(trade_demo_benchmark2$expression)), "eglm", "glm"
)
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
coord_fixed() +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time", x = NULL, y = NULL)
View(trade_demo_benchmark2)
library(ggplot2)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
trade_demo_benchmark2$expression <- ifelse(
grepl("eglm", as.character(trade_demo_benchmark2$expression)), "eglm", "glm"
)
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
coord_fixed() +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time",
x = "number of observations",
y = "fitting time")
library(ggplot2)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
trade_demo_benchmark2$expression <- ifelse(
grepl("eglm", as.character(trade_demo_benchmark2$expression)), "eglm", "glm"
)
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
# scale_x_log10(
#   breaks = scales::trans_breaks("log10", function(x) 10^x),
#   labels = scales::trans_format("log10", scales::math_format(10^.x))
# ) +
coord_fixed() +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time",
x = "number of observations",
y = "fitting time")
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
# scale_x_log10(
#   breaks = scales::trans_breaks("log10", function(x) 10^x),
#   labels = scales::trans_format("log10", scales::math_format(10^.x))
# ) +
coord_fixed() +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time",
x = "number of observations",
y = "fitting time")
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
# scale_x_log10(
#   breaks = scales::trans_breaks("log10", function(x) 10^x),
#   labels = scales::trans_format("log10", scales::math_format(10^.x))
# ) +
# coord_fixed() +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time",
x = "number of observations",
y = "fitting time")
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
# coord_fixed() +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time",
x = "number of observations",
y = "fitting time")
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
# scale_x_log10(
#   breaks = scales::trans_breaks("log10", function(x) 10^x),
#   labels = scales::trans_format("log10", scales::math_format(10^.x))
# ) +
# coord_fixed() +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time",
x = "number of observations",
y = "fitting time")
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
# coord_fixed() +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time",
x = "number of observations",
y = "fitting time")
library(ggplot2)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
trade_demo_benchmark2$expression <- ifelse(
grepl("eglm", as.character(trade_demo_benchmark2$expression)), "eglm", "glm"
)
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time",
x = "number of observations",
y = "fitting time")
library(ggplot2)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
trade_demo_benchmark2$expression <- ifelse(
grepl("eglm", as.character(trade_demo_benchmark2$expression)), "eglm", "glm"
)
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time",
x = "number of observations",
y = "fitting time")
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = mem_alloc, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_bytes() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs memory allocation",
x = "number of observations",
y = "fitting time")
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time",
x = "number of observations",
y = "fitting time")
library(eflm)
model <- "trade ~ log_dist + cntg + lang + clny + exp_year + imp_year"
y <- unique(trade_demo_glm$year)
trade_demo_benchmark <- list()
for (i in seq_along(y)) {
d <- trade_demo_glm[trade_demo_glm$year <= y[i], ]
out <- bench::mark(
glm(model, data = d,
family = quasipoisson(link = "log"))$coefficients,
eglm(model, data = d,
family = quasipoisson(link = "log"), bypass = F)$coefficients
)
out$dimensions <- nrow(d) * ncol(d)
trade_demo_benchmark[[i]] <- out
}
use_data(trade_demo_benchmark, compress = "xz")
library(ggplot2)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
trade_demo_benchmark2$expression <- ifelse(
grepl("eglm", as.character(trade_demo_benchmark2$expression)), "eglm", "glm"
)
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time",
x = "number of observations",
y = "fitting time")
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = mem_alloc, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_bytes() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs memory allocation",
x = "number of observations",
y = "fitting time")
View(trade_demo_benchmark2)
View(trade_demo_benchmark2[[11]][[1]])
View(trade_demo_benchmark2[[11]][[2]])
library(ggplot2)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
trade_demo_benchmark2$expression2 <- ifelse(
grepl("eglm", as.character(trade_demo_benchmark2$expression)), "eglm", "glm"
)
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = expression2)) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time",
x = "number of observations",
y = "fitting time")
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = mem_alloc, color = expression)) +
geom_point() +
geom_line() +
bench::scale_y_bench_bytes() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs memory allocation",
x = "number of observations",
y = "fitting time")
library(ggplot2)
trade_demo_benchmark2 <- do.call("rbind", trade_demo_benchmark)
trade_demo_benchmark2$expression2 <- ifelse(
grepl("eglm", as.character(trade_demo_benchmark2$expression)), "eglm", "glm"
)
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = median, color = expression2)) +
geom_point() +
geom_line() +
bench::scale_y_bench_time() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs fitting time",
x = "number of observations",
y = "fitting time")
ggplot(trade_demo_benchmark2, aes(x = dimensions, y = mem_alloc, color = expression2)) +
geom_point() +
geom_line() +
bench::scale_y_bench_bytes() +
scale_x_log10(
breaks = scales::trans_breaks("log10", function(x) 10^x),
labels = scales::trans_format("log10", scales::math_format(10^.x))
) +
theme(panel.grid.minor = element_blank()) +
labs(title = "log-log plot of number of observations vs memory allocation",
x = "number of observations",
y = "fitting time")
.3 / 1.5
library(eflm)
load_all()
safe_subset(mtcars, NULL)
